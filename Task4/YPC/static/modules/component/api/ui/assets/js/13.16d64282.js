(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{397:function(s,t,a){s.exports=a.p+"assets/img/mapgis.b050efa8.png"},398:function(s,t,a){s.exports=a.p+"assets/img/use_mapgis.9d2be73b.png"},400:function(s,t,a){s.exports=a.p+"assets/img/bug.9e822d4d.png"},585:function(s,t,a){"use strict";a.r(t);var n=a(13),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"发布流程-开发者"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布流程-开发者"}},[s._v("#")]),s._v(" 发布流程——开发者")]),s._v(" "),t("h2",{attrs:{id:"发布前的准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布前的准备工作"}},[s._v("#")]),s._v(" 发布前的准备工作")]),s._v(" "),t("ol",[t("li",[s._v("更新版本号，修改 package.json 中的版本号为最新版本")]),s._v(" "),t("li",[s._v('将 package.json 中的部署包指向 dist-libs，可以删除"module"一行或将其改为"module1"')])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"main"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist-libs/webclient-vue-ui.umd.min.js"')]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"module1"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/index.js"')]),s._v(",\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("发布前测试\n"),t("blockquote",[t("p",[s._v("发布前必须本地 yarn build 后生成临时的 dist-libs 替换应用层/测试层的 node_modules 下的 dist-libs 依赖后，保证能够测试程序运行成功才能进行 publish 操作\n避免真实应用出现下面的错误")])])])]),s._v(" "),t("img",{attrs:{alt:"bug",src:a(400),width:"70%"}}),s._v(" "),t("h2",{attrs:{id:"发布内网仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布内网仓库"}},[s._v("#")]),s._v(" 发布内网仓库")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置为mapgis内部源")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" registry http://192.168.11.130:4873/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注册用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" adduser "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--registry")]),s._v(" http://192.168.11.130:4873/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("who")]),s._v(" am i\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布仓库  一定要在对应的发布库的根目录下发布")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--registry")]),s._v(" http://192.168.11.130:4873/\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("仓库过大无法发布")]),s._v(" "),t("p",[s._v("npm config set max_body_size 100mb --registry http://192.168.11.130:4873/")])]),s._v(" "),t("h2",{attrs:{id:"发布外网仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布外网仓库"}},[s._v("#")]),s._v(" 发布外网仓库")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一定要设置npm官方源，不能使用淘宝镜像源")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" registry http://www.npmjs.org\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前所在源")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config get registry\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注册用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" adduser\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布仓库")]),s._v("\n进入要发布的package.json所在的目录下，发布包"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("前提：npm账号属于mapgis组织"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--access")]),s._v(" public\n")])])]),t("h2",{attrs:{id:"使用-nrm-快速切换不同-npm-源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-nrm-快速切换不同-npm-源"}},[s._v("#")]),s._v(" 使用 nrm 快速切换不同 npm 源")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("在不同的 npm 源地址（如官方源、淘宝源或 mapgis 内部源）之间频繁切换较为繁琐，可以使用 nrm 进行切换与查看")])]),s._v(" "),t("p",[s._v("使用方式：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("下载nrm： npm install -g nrm\n切换镜像源： nrm use 镜像名\n查看可切换的镜像源： nrm ls(*表示正在使用的镜像源)\n")])])]),t("p",[s._v("使用示例")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm set registry http://192.168.11.130:4873/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" nrm\nnrm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" mapgis http://192.168.11.130:4873/\nnrm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\nnrm use mapgis\nnrm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n")])])]),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[s._v("查看可切换列表")]),s._v(" "),t("th",{staticStyle:{"text-align":"left"}},[s._v("使用")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("img",{attrs:{src:a(397),alt:"mapgis"}})]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("img",{attrs:{src:a(398),alt:"mapgis"}})])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);