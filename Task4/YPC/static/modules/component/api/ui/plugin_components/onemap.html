<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>一张图组件移植 | 中地数码</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <meta name="description" content="@mapgis/webclient-vue-ui">
    
    <link rel="preload" href="/assets/css/0.styles.7bcbb376.css" as="style"><link rel="preload" href="/assets/js/app.fda58b5c.js" as="script"><link rel="preload" href="/assets/js/3.efbb0eff.js" as="script"><link rel="preload" href="/assets/js/35.12c69ed1.js" as="script"><link rel="prefetch" href="/assets/js/10.80c6b69d.js"><link rel="prefetch" href="/assets/js/11.7342efae.js"><link rel="prefetch" href="/assets/js/12.0c0068d5.js"><link rel="prefetch" href="/assets/js/13.16d64282.js"><link rel="prefetch" href="/assets/js/14.2039489d.js"><link rel="prefetch" href="/assets/js/15.d6898430.js"><link rel="prefetch" href="/assets/js/16.6ad89099.js"><link rel="prefetch" href="/assets/js/17.0a1014b3.js"><link rel="prefetch" href="/assets/js/18.003e8146.js"><link rel="prefetch" href="/assets/js/19.2cad6cfe.js"><link rel="prefetch" href="/assets/js/20.c8e7814c.js"><link rel="prefetch" href="/assets/js/21.f2c11e44.js"><link rel="prefetch" href="/assets/js/22.224bbd43.js"><link rel="prefetch" href="/assets/js/23.32d1592c.js"><link rel="prefetch" href="/assets/js/24.07e34416.js"><link rel="prefetch" href="/assets/js/25.e35e3703.js"><link rel="prefetch" href="/assets/js/26.e6b3c06e.js"><link rel="prefetch" href="/assets/js/27.ed6c7c25.js"><link rel="prefetch" href="/assets/js/28.a80d5d62.js"><link rel="prefetch" href="/assets/js/29.3ca48aab.js"><link rel="prefetch" href="/assets/js/30.4e1b1ed4.js"><link rel="prefetch" href="/assets/js/31.e44749b1.js"><link rel="prefetch" href="/assets/js/32.3e325379.js"><link rel="prefetch" href="/assets/js/33.89c5c09a.js"><link rel="prefetch" href="/assets/js/34.6a340568.js"><link rel="prefetch" href="/assets/js/36.ed0f0464.js"><link rel="prefetch" href="/assets/js/37.f43ebb25.js"><link rel="prefetch" href="/assets/js/38.117c65e8.js"><link rel="prefetch" href="/assets/js/39.f6c330fa.js"><link rel="prefetch" href="/assets/js/4.8a523462.js"><link rel="prefetch" href="/assets/js/40.be7628f4.js"><link rel="prefetch" href="/assets/js/41.5325d87d.js"><link rel="prefetch" href="/assets/js/42.fb2898d7.js"><link rel="prefetch" href="/assets/js/43.c6c332ae.js"><link rel="prefetch" href="/assets/js/44.6c8fde32.js"><link rel="prefetch" href="/assets/js/45.76a7bc47.js"><link rel="prefetch" href="/assets/js/46.6068b286.js"><link rel="prefetch" href="/assets/js/47.b07d6563.js"><link rel="prefetch" href="/assets/js/48.33691db9.js"><link rel="prefetch" href="/assets/js/49.ff209356.js"><link rel="prefetch" href="/assets/js/5.cdf771b7.js"><link rel="prefetch" href="/assets/js/50.2374fd9f.js"><link rel="prefetch" href="/assets/js/51.3c944302.js"><link rel="prefetch" href="/assets/js/52.f1db760a.js"><link rel="prefetch" href="/assets/js/53.45883249.js"><link rel="prefetch" href="/assets/js/6.1bee08ff.js"><link rel="prefetch" href="/assets/js/7.8e644502.js"><link rel="prefetch" href="/assets/js/8.9a098ecb.js"><link rel="prefetch" href="/assets/js/9.35ca4d18.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.e7c406e5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7bcbb376.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">中地数码</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  向导
</a></div><div class="nav-item"><a href="/api/iconfont/IconFont.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="http://develop.smaryun.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WebClient
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/MapGIS/WebClient-Vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  开源
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  向导
</a></div><div class="nav-item"><a href="/api/iconfont/IconFont.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="http://develop.smaryun.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WebClient
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/MapGIS/WebClient-Vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  开源
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" class="sidebar-link">快速上手</a></li><li><a href="/guide/introduction.html" class="sidebar-link">产品介绍</a></li><li><a href="/guide/dev.html" class="sidebar-link">本地link部署包方式</a></li><li><a href="/local/publish.html" class="sidebar-link">发布流程</a></li><li><a href="/local/mixlocal.html" class="sidebar-link">环境配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>图标</span> <!----></p> <!----></section></li><li><a href="/api/iconfont/IconFont.html" class="sidebar-link">图标</a></li><li><a href="/api/collapsecard/CollapseCard.html" class="sidebar-link">收缩卡片</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>云盘组件</span> <!----></p> <!----></section></li><li><a href="/api/upload/Upload.html" class="sidebar-link">上传</a></li><li><a href="/api/clouddiskFileSelect/CDFileSelect.html" class="sidebar-link">从云盘选择</a></li><li><a href="/api/saveToClouddisk/SaveToCd.html" class="sidebar-link">保存至云盘</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>区域组件</span> <!----></p> <!----></section></li><li><a href="/api/panel/switch.html" class="sidebar-link">开关</a></li><li><a href="/api/panel/inputnumber.html" class="sidebar-link">数值输入</a></li><li><a href="/api/panel/inputnumberaddon.html" class="sidebar-link">数值输入-前后缀</a></li><li><a href="/api/panel/select.html" class="sidebar-link">选择器</a></li><li><a href="/api/panel/color_pick.html" class="sidebar-link">颜色选取</a></li><li><a href="/api/panel/tab.html" class="sidebar-link">页面切换</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>颜色</span> <!----></p> <!----></section></li><li><a href="/api/color/d3color.html" class="sidebar-link">颜色-D3色板</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>科技风</span> <!----></p> <!----></section></li><li><a href="/api/technology/borderbox.html" class="sidebar-link">科技风-卡片</a></li><li><a href="/api/technology/decoration.html" class="sidebar-link">科技风-装饰</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>问题解决</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/build.html" class="sidebar-link">解决打包内存溢出问题</a></li><li><a href="/guide/borderBox.html" class="sidebar-link">解决全局设置为盒模型问题</a></li><li><a href="/guide/fontSize.html" class="sidebar-link">解决字体大小被全局设置的问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>样式&amp;主题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/style/theme_switch.html" class="sidebar-link">主题切换</a></li><li><a href="/style/css/less2scss.html" class="sidebar-link">Less &amp; Sass</a></li><li><a href="/style/css/less.html" class="sidebar-link">Less常见问题</a></li><li><a href="/style/css/sass.html" class="sidebar-link">Sass常见问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>组件开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/plugin_components/new_form_model.html" class="sidebar-link">组件开发样式规范说明</a></li><li><a href="/plugin_components/form_model.html" class="sidebar-link">弹框表单样式修改说明</a></li><li><a href="/plugin_components/onemap.html" aria-current="page" class="active sidebar-link">移植组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/plugin_components/onemap.html#已移植组件" class="sidebar-link">已移植组件</a></li><li class="sidebar-sub-header"><a href="/plugin_components/onemap.html#样式变量问题汇总" class="sidebar-link">样式变量问题汇总</a></li><li class="sidebar-sub-header"><a href="/plugin_components/onemap.html#注" class="sidebar-link">注</a></li><li class="sidebar-sub-header"><a href="/plugin_components/onemap.html#组件分析" class="sidebar-link">组件分析</a></li><li class="sidebar-sub-header"><a href="/plugin_components/onemap.html#核心-ui-的分离与替换" class="sidebar-link">核心 UI 的分离与替换</a></li><li class="sidebar-sub-header"><a href="/plugin_components/onemap.html#样式移植" class="sidebar-link">样式移植</a></li><li class="sidebar-sub-header"><a href="/plugin_components/onemap.html#功能移植" class="sidebar-link">功能移植</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>版本</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/version/version.html" class="sidebar-link">更新说明</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="一张图组件移植"><a href="#一张图组件移植" class="header-anchor">#</a> 一张图组件移植</h1> <h2 id="已移植组件"><a href="#已移植组件" class="header-anchor">#</a> 已移植组件</h2> <table><thead><tr><th style="text-align:left;">原始名称</th> <th style="text-align:left;">新名称</th> <th style="text-align:left;">问题</th> <th style="text-align:left;">所在文件夹</th> <th style="text-align:left;">已补充 storybook</th> <th style="text-align:left;">涉及 a-icon</th></tr></thead> <tbody><tr><td style="text-align:left;">MpImgCheckbox</td> <td style="text-align:left;">mapgis-ui-img-checkbox</td> <td style="text-align:left;"></td> <td style="text-align:left;">checkbox</td> <td style="text-align:left;">√</td> <td style="text-align:left;">√</td></tr> <tr><td style="text-align:left;">MpImgCheckboxGroup</td> <td style="text-align:left;">mapgis-ui-img-checkbox-group</td> <td style="text-align:left;"></td> <td style="text-align:left;">checkbox</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpColorCheckbox</td> <td style="text-align:left;">mapgis-ui-color-checkbox</td> <td style="text-align:left;">未找到$base-bg-color</td> <td style="text-align:left;">checkbox</td> <td style="text-align:left;">√</td> <td style="text-align:left;">√</td></tr> <tr><td style="text-align:left;">MpColorCheckboxGroup</td> <td style="text-align:left;">mapgis-ui-color-checkbox-group</td> <td style="text-align:left;"></td> <td style="text-align:left;">checkbox</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpSpin</td> <td style="text-align:left;">mapgis-ui-map-spin</td> <td style="text-align:left;"></td> <td style="text-align:left;">spin</td> <td style="text-align:left;">-</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpMask</td> <td style="text-align:left;">mapgis-ui-mask</td> <td style="text-align:left;"></td> <td style="text-align:left;">mask</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpCollapseButton</td> <td style="text-align:left;">mapgis-ui-collapse-button</td> <td style="text-align:left;">未找到$base-bg-color未找到$border-color</td> <td style="text-align:left;">collapse</td> <td style="text-align:left;">-</td> <td style="text-align:left;">√</td></tr> <tr><td style="text-align:left;">MpAdjustLine</td> <td style="text-align:left;">mapgis-ui-adjust-line</td> <td style="text-align:left;">未找到$base-bg-color未找到$border-color</td> <td style="text-align:left;">adjust-line</td> <td style="text-align:left;">-</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpGroupTab</td> <td style="text-align:left;">mapgis-ui-group-tab</td> <td style="text-align:left;"></td> <td style="text-align:left;">tabs</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpSettingForm</td> <td style="text-align:left;">mapgis-ui-setting-form</td> <td style="text-align:left;"></td> <td style="text-align:left;">form</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpTreeSelect</td> <td style="text-align:left;">mapgis-ui-custom-tree-select</td> <td style="text-align:left;"></td> <td style="text-align:left;">tree-select</td> <td style="text-align:left;">-</td> <td style="text-align:left;">√</td></tr> <tr><td style="text-align:left;">MpColorPicker</td> <td style="text-align:left;">mapgis-ui-sketch-color-picker</td> <td style="text-align:left;"></td> <td style="text-align:left;">color-picker</td> <td style="text-align:left;">-</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpColorPickerConfirm</td> <td style="text-align:left;">mapgis-ui-sketch-color-picker-confirm</td> <td style="text-align:left;">$size-lg、$size-md、$size-sm 需要放到全局</td> <td style="text-align:left;">color-picker</td> <td style="text-align:left;">-</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpWindow</td> <td style="text-align:left;">mapgis-ui-window</td> <td style="text-align:left;">未找到$base-bg-color未找到$border-color</td> <td style="text-align:left;">window</td> <td style="text-align:left;">-</td> <td style="text-align:left;">√</td></tr> <tr><td style="text-align:left;">MpWindowWrapper</td> <td style="text-align:left;">mapgis-ui-window-wrapper</td> <td style="text-align:left;"></td> <td style="text-align:left;">window</td> <td style="text-align:left;">-</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpPlacement</td> <td style="text-align:left;">mapgis-ui-placement</td> <td style="text-align:left;"></td> <td style="text-align:left;">placement</td> <td style="text-align:left;">-</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpIcon</td> <td style="text-align:left;">mapgis-ui-icon</td> <td style="text-align:left;"></td> <td style="text-align:left;">iconfont</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpButton</td> <td style="text-align:left;">mapgis-ui-tooltip-button</td> <td style="text-align:left;"></td> <td style="text-align:left;">button</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpCard</td> <td style="text-align:left;">mapgis-ui-command-card</td> <td style="text-align:left;"></td> <td style="text-align:left;">card</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpEditableTable</td> <td style="text-align:left;">mapgis-ui-editable-table</td> <td style="text-align:left;"></td> <td style="text-align:left;">table</td> <td style="text-align:left;">√</td> <td style="text-align:left;">√</td></tr> <tr><td style="text-align:left;">MpRowFlex</td> <td style="text-align:left;">mapgis-ui-row-flex</td> <td style="text-align:left;"></td> <td style="text-align:left;">grid</td> <td style="text-align:left;">√</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpToolbar</td> <td style="text-align:left;">mapgis-ui-toolbar</td> <td style="text-align:left;"></td> <td style="text-align:left;">toolbar</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpToolbarSpace</td> <td style="text-align:left;">mapgis-ui-toolbar-space</td> <td style="text-align:left;"></td> <td style="text-align:left;">toolbar</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpToolbarTitle</td> <td style="text-align:left;">mapgis-ui-toolbar-title</td> <td style="text-align:left;"></td> <td style="text-align:left;">toolbar</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpToolbarCommand</td> <td style="text-align:left;">mapgis-ui-toolbar-command</td> <td style="text-align:left;"></td> <td style="text-align:left;">toolbar</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td></tr> <tr><td style="text-align:left;">MpToolbarCommandGroup</td> <td style="text-align:left;">mapgis-ui-toolbar-command-group</td> <td style="text-align:left;"></td> <td style="text-align:left;">toolbar</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpMarkerPlotting</td> <td style="text-align:left;">mapgis-dynamic-marker-layer</td> <td style="text-align:left;"></td> <td style="text-align:left;">mapboxgl/marker</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td></tr> <tr><td style="text-align:left;">MpMarkerPro</td> <td style="text-align:left;">mapgis-marker-pro</td> <td style="text-align:left;"></td> <td style="text-align:left;">mapboxgl/marker</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">MpMarkerSetPro</td> <td style="text-align:left;">mapgis-marker-set-pro</td> <td style="text-align:left;"></td> <td style="text-align:left;">mapboxgl/marker</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Mp3dMarkerPlotting</td> <td style="text-align:left;">mapgis-3d-dynamic-marker-layer</td> <td style="text-align:left;"></td> <td style="text-align:left;">cesium/marker</td> <td style="text-align:left;"></td> <td style="text-align:left;">√</td></tr> <tr><td style="text-align:left;">Mp3dMarkerPro</td> <td style="text-align:left;">mapgis-3d-marker-pro</td> <td style="text-align:left;"></td> <td style="text-align:left;">cesium/marker</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Mp3dMarkerSetPro</td> <td style="text-align:left;">mapgis-3d-marker-set-pro</td> <td style="text-align:left;"></td> <td style="text-align:left;">cesium/marker</td> <td style="text-align:left;"></td> <td style="text-align:left;"></td></tr></tbody></table> <h2 id="样式变量问题汇总"><a href="#样式变量问题汇总" class="header-anchor">#</a> 样式变量问题汇总</h2> <p>若遇到<code>ui\src\util\style\theme\theme.scss</code>里找不到的样式变量，可填写至下表。（本 md 文件路径：<code>ui\docs\plugin_components\onemap.md</code>）。</p> <table><thead><tr><th style="text-align:left;">theme.scss 中未找到</th> <th style="text-align:left;">局部已有定义，需要放到 theme.scss</th></tr></thead> <tbody><tr><td style="text-align:left;">$base-bg-color</td> <td style="text-align:left;">$size-lg</td></tr> <tr><td style="text-align:left;">$border-color</td> <td style="text-align:left;">$size-md</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">$size-sm</td></tr></tbody></table> <h2 id="注"><a href="#注" class="header-anchor">#</a> 注</h2> <p>1、Select、Input 组件已添加属性：<code>autoWidth</code>，设置为 true 时可实现宽度 100% 自适应。</p> <p>2、Card 组件已添加属性：<code>customPosition</code>，可控制卡片显示的绝对位置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token literal-property property">customPosition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
  <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span>
    <span class="token punctuation">[</span>
      <span class="token string">'top-right'</span><span class="token punctuation">,</span>
      <span class="token string">'top-left'</span><span class="token punctuation">,</span>
      <span class="token string">'bottom-right'</span><span class="token punctuation">,</span>
      <span class="token string">'bottom-left'</span>
    <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>3、<code>&lt;mapgis-ui-form&gt;</code>和<code>&lt;mapgis-ui-form-item&gt;</code>组件已封装完成！！！</p> <h2 id="组件分析"><a href="#组件分析" class="header-anchor">#</a> 组件分析</h2> <p>以地形组件为例</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <blockquote><p>terrain-analysis/aspect-analysis.vue
该组件核心三部分</p> <ol><li>模板 <code>&lt;template /&gt;</code></li> <li>代码 <code>&lt;ts /&gt;</code> 三方库 ts 实现</li> <li>样式 <code>&lt;less /&gt;</code>
:::</li></ol></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mp-widget-aspect-analysis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mp-group-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>坡向图例设置<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-tooltip</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placement</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottomRight<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-icon</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info-circle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info-icon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-icon</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-tooltip</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mp-group-tab</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MpColorsSetting</span>
      <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>params<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:rangeField</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>坡向范围'<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MpColorsSetting</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mp-footer-actions<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>分析<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remove<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>清除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">&quot;../index.less&quot;</span><span class="token punctuation">;</span></span>

<span class="token selector">.info-icon</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@primary-6</span><span class="token punctuation">;</span></span>
  <span class="token property">width</span><span class="token punctuation">:</span> 27px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 6px<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h1 id="步骤"><a href="#步骤" class="header-anchor">#</a> 步骤</h1> <ol><li>抽离核心的可以复用的公共组件到 UI 部分，替换 antd 为 mapgis-ui</li> <li>针对 UI 的 less/sass 样式进行分离</li> <li>转换三方 ts 语法为标准 js 语法</li></ol> <h2 id="核心-ui-的分离与替换"><a href="#核心-ui-的分离与替换" class="header-anchor">#</a> 核心 UI 的分离与替换</h2> <p>该组件使用了<code>&lt;mp-group-tab /&gt;</code> 与 <code>&lt;MpColorsSetting /&gt;</code> 2 个组件，根据能否复用的原则，将这 2 个组件下沉到<code>@mapgis/webclient-vue-ui</code>中</p> <p>以<mp-group-tab></mp-group-tab>为例</p> <ol><li>在<code>@mapgis/webclient-vue-ui</code>的 src/components/tabs/ 下新建<code>GroupTab.vue</code> 文件，将原本的一张图的组件代码直接复制到该文件夹。
<ol><li>由于该组件是个纯净的组件，只需要将里面使用<code>&lt;a-xxx /&gt;</code>的 ui 替换成<code>&lt;mapgis-ui-xxx /&gt;</code>即可</li> <li><code>&lt;mapgis-ui- /&gt;</code>是<code>&lt;a-xxx /&gt;</code>的超集，只在样式和主题等个性化定制上有细微差距，核心 api 延续了 antd-vue 的 api</li> <li>该组件里面没有使用到<code>&lt;a-xxx /&gt;</code>，因此无需替换</li></ol></li> <li>针对该组件的样式
<ol><li>将该组件的样式部分从<code>&lt;style /&gt;</code>里面单独的剥离到当前目录的<code>style/tabs.scss</code>目录下</li> <li>2 种方式移植，第一种是最暴力的方式，直接将整个样式移植到 tabs.scss 的最尾部 <img src="/assets/img/less2scss.3951d144.png" alt="less2scss"></li> <li>对比上图发现，其中有 2 种颜色是没有找到的，优先去寻找<code>ui\src\util\style\theme\theme.scss</code> 看看有没有 ，我对比了一张图的 theme.less 里面是 400 多的变量，mapgis-ui-是 777 个变量，绝大部分都囊括了一张图的样式</li> <li>将上面的@primary-color; @heading-color; 替换成 $primary-color; $heading-color; 即可</li> <li>具体的语法替换规则 请查看 <a href="/style/css/less2scss.html">less =&gt; scss 章节</a></li> <li>如果是新建的 scss 样式，不要忘记向<code>ui\src\style.scss</code>下增加该样式</li></ol> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token comment">/* MapGIS Design Mapbox Base*/</span>
<span class="token keyword">@import</span> <span class="token string">&quot;./components/map/style/map.scss&quot;</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>替换后将 <code>&lt;mp-group-tab title=&quot;坡向图例设置&quot; /&gt;</code> 修改为 <code>&lt;mapgis-ui-group-tab title=&quot;坡向图例设置&quot; /&gt;</code></li></ol> <h2 id="样式移植"><a href="#样式移植" class="header-anchor">#</a> 样式移植</h2> <blockquote><p>样式是最独立的，从优先级和影响性上是相对最小的。因此先将样式移植。请查看 <a href="/style/css/less2scss.html">less =&gt; scss 章节</a></p></blockquote> <p>以下面为例，</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
// 这一行对应的是基础的样式依赖，可以人为是类似引入一些基本的全局样式变量
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">&quot;../index.less&quot;</span><span class="token punctuation">;</span></span>

<span class="token selector">.info-icon</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@primary-6</span><span class="token punctuation">;</span></span> // 此处的<span class="token atrule"><span class="token rule">@primary-6</span>就来自于上面的 ../index.less的定义或者是lessOptions里面的配置项
  <span class="token property">width</span><span class="token punctuation">:</span> 27px<span class="token punctuation">;</span></span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 6px<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>强烈建议将样式，尤其是需要跟随主题切换的样式放到 ui 的 scss 中</p></div></div> <h2 id="功能移植"><a href="#功能移植" class="header-anchor">#</a> 功能移植</h2> <p>功能移植分 2 大类：</p> <ol><li>混入的分离</li> <li>纯组件的分离</li></ol> <h3 id="分离-混入"><a href="#分离-混入" class="header-anchor">#</a> 分离-混入</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MpAspectAnalysis</span> <span class="token keyword">extends</span> <span class="token class-name">Mixins</span><span class="token punctuation">(</span>WidgetMixin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">onActive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> viewer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>webGlobe<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>globe<span class="token punctuation">.</span>enableLighting <span class="token operator">&amp;&amp;</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>brightness<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>brightnessEnabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 微件失活时</span>
  <span class="token function">onDeActive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>由于 WidgetMixin 是 waf 提供的混入，因此不继续处理该混入，而是直接将该组件变成一个纯净的功能组件。</p></div> <p>将 ts 处理成 js 的语法后</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;mapgis-3d-analysis-aspect&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>原来的一张图的使用方式就变成了</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapgis-3d-analysis-aspect</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aspect<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">class</span> <span class="token class-name">MpAspectAnalysis</span> <span class="token keyword">extends</span> <span class="token class-name">Mixins</span><span class="token punctuation">(</span>WidgetMixin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">onActive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>aspect<span class="token punctuation">.</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">onDeActive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>aspect<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="分离-功能"><a href="#分离-功能" class="header-anchor">#</a> 分离-功能</h3> <p>优先参考 @mapgis/webclient-vue-cesium 帮助文档的-创建插件组件章节</p> <ol><li><p>生命周期-创建</p> <ol><li>原来的创建方式<div class="language-js extra-class"><pre class="language-js"><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span>AspectAnalyzeManage <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">drawElement</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token literal-property property">aspectAnalysis</span><span class="token operator">:</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></li> <li>新的创建方式<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token function">createCesiumObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> baseUrl<span class="token punctuation">,</span> options <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token comment">// 如果需要创建Cesium的对象或者数据源就创建</span>
<span class="token comment">// return new Cesium.GeoJsonDataSource.load(...props, options);</span>
<span class="token comment">// 没有就返回一个空的Promise，方便后面实现业务逻辑</span>
<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>
  <span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token parameter">reject</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></li></ol> <div class="language- extra-class"><pre class="language-text"><code>
</code></pre></div></li> <li><p>生命周期-添加</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> webGlobe<span class="token punctuation">,</span> CesiumZondy<span class="token punctuation">,</span> vueKey<span class="token punctuation">,</span> vueIndex <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> viewer <span class="token punctuation">}</span> <span class="token operator">=</span> webGlobe<span class="token punctuation">;</span>
  <span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createCesiumObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dataSource</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    vm<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;load&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token keyword">this</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CesiumZondy<span class="token punctuation">.</span>AspectAnalysisManager<span class="token punctuation">.</span><span class="token function">addSource</span><span class="token punctuation">(</span> vueKey<span class="token punctuation">,</span> vueIndex<span class="token punctuation">,</span>
      dataSource<span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">drawElement</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token literal-property property">aspectAnalysis</span><span class="token operator">:</span> <span class="token keyword">null</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></li> <li><p>生命周期-删除</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">unmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> CesiumZondy<span class="token punctuation">,</span> vueKey<span class="token punctuation">,</span> vueIndex <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> find <span class="token operator">=</span> CesiumZondy<span class="token punctuation">.</span>AspectAnalysisManager<span class="token punctuation">.</span><span class="token function">findSource</span><span class="token punctuation">(</span>vueKey<span class="token punctuation">,</span> vueIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>find<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 释放业务逻辑}</span>
  CesiumZondy<span class="token punctuation">.</span>AspectAnalysisManager<span class="token punctuation">.</span><span class="token function">deleteSource</span><span class="token punctuation">(</span>vueKey<span class="token punctuation">,</span> vueIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;unload&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></li> <li><p>生命周期-修改</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> CesiumZondy<span class="token punctuation">,</span> vueKey<span class="token punctuation">,</span> vueIndex <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> find <span class="token operator">=</span> CesiumZondy<span class="token punctuation">.</span>AspectAnalysisManager<span class="token punctuation">.</span><span class="token function">changeOptions</span><span class="token punctuation">(</span>vueKey<span class="token punctuation">,</span> vueIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/plugin_components/form_model.html" class="prev">
        弹框表单样式修改说明
      </a></span> <span class="next"><a href="/version/version.html">
        更新说明
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.fda58b5c.js" defer></script><script src="/assets/js/3.efbb0eff.js" defer></script><script src="/assets/js/35.12c69ed1.js" defer></script>
  </body>
</html>
